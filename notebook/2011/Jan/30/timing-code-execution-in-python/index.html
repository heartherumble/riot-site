<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <!--[if IE]><![endif]-->
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Riot</title>
        <meta name="description" content="We are Riot and we do great work.">
        <meta name="keywords" content="riot great work">
        <meta http-equiv="imagetoolbar" content="false">
        <meta name="robots" content="index, follow, noodp">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="../../../../.././theme/img/icons/favicon.ico">
        <link rel="stylesheet" href="../../../../.././theme/type/stylesheet.css">
        
        <link rel="stylesheet" href="../../../../.././theme/css/base.css">
        
        <script src="../../../../.././theme/js/modernizr.js"></script>
        <!-- IE Fix for HTML5 Tags -->
        <!--[if lt IE 9]>
          <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
    </head>
    <body>
        <div id="redline"></div>
        <div id="icons">
            <a href="http://github.com/heartherumble"><span class="github">G</span></a>
            <a href="http://twitter.com/heartherumble"><span class="twitter">t</span></a>
        </div>
        
        <div id="container">
            <header>
    <div id="follow">
        <ul class="follow-me">
            <li class="twitter"><a href="http://twitter.com/heartherumble/">twitter</a></li>
            <li class="github"><a href="http://github.com/heartherumble/">github</a></li>
            
        </ul>
    </div>
    <div class="logo"><h1><a href="/">Riot</a></h1></div>
    <div><a id="follow-link" href="#follow">hear the rumble</a></div>
    <div class="nav">
        <ul>
            <li><a href="../../../../.././notebook/">Notebook</a></li>
            <li><a href="../../../../.././about-us/">About Us</a></li>
        </ul>
    </div>
</header>
            <div id="main" class="clear">
                
                
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="notebook/2011/Jan/30/timing-code-execution-in-python/" rel="bookmark"
         title="Permalink to Timing Code Execution in Python">Timing Code Execution in Python</a></h2>
  </header>
  <footer class="post-info">
    <abbr class="published" title="2011-01-30T00:00:00">
      Sun 30 January 2011
    </abbr>
    
    <address class="vcard author">
      By <a class="url fn" href="../../../../.././author/riot.html">Riot</a>
    </address>
    
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <p>I wrote an implementation of the <a href="http://en.wikipedia.org/wiki/Levenshtein_distance">Levenshtein algorithm</a> in python a few days back, and today while noodling around, I came across another implementation of the same algorithm, written by <a href="http://hetland.org">Magnus Hetland</a> the author of <a href="http://www.amazon.com/Python-Algorithms-Mastering-Basic-Language/dp/1430232374/">Python Algorithms</a> and wanted to see which was the "faster" implementation.</p>
<p>So, enter the <a href="http://docs.python.org/library/timeit.html">timeit()</a> module in python. Here's what I did:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">levenshtein</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
<span class="o">...</span>     <span class="s">&quot;Magnus&#39;s Code&quot;</span>
<span class="o">...</span>     
<span class="o">...</span>     <span class="p">[</span> <span class="n">Code</span> <span class="n">here</span> <span class="p">]</span>
<span class="o">...</span>   
<span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">leven</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
<span class="o">...</span>     <span class="s">&quot;Rohit&#39;s Code&quot;</span>
<span class="o">...</span>     
<span class="o">...</span>     <span class="p">[</span> <span class="n">Code</span> <span class="n">here</span> <span class="p">]</span>
<span class="o">...</span>     
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">timeit</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t1</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">Timer</span><span class="p">(</span><span class="n">setup</span><span class="o">=</span><span class="s">&#39;from __main__ import levenshtein&#39;</span><span class="p">,</span> <span class="n">stmt</span><span class="o">=</span><span class="s">&#39;levenshtein(&quot;plumber&quot;,&quot;causes&quot;)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">timeit</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t1</span>
<span class="mf">50.655728101730347</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t2</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">Timer</span><span class="p">(</span><span class="n">setup</span><span class="o">=</span><span class="s">&#39;from __main__ import leven&#39;</span><span class="p">,</span> <span class="n">stmt</span><span class="o">=</span><span class="s">&#39;leven(&quot;plumber&quot;,&quot;causes&quot;)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">timeit</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t2</span>
<span class="mf">68.573153972625732</span>
</pre></div>
</td></tr></table>

<p>Seems like Magnus has me beat :(.</p>
<p>One point to note here is that timeit() temporarily turns off garbage collection, so if your code requires it you will need to add it in.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">gc</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">setup</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span><span class="se">\</span>
<span class="s">... from __main__ import levenshtein</span>
<span class="s">... gc.enable()</span>
<span class="s">... &quot;&quot;&quot;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t2</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">Timer</span><span class="p">(</span><span class="n">setup</span><span class="o">=</span><span class="n">setup</span><span class="p">,</span> <span class="n">stmt</span><span class="o">=</span><span class="s">&#39;levenshtein(&quot;plumber&quot;,&quot;causes&quot;)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">timeit</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<p>There is also quite a nice collection of python performance tips <a href="http://wiki.python.org/moin/PythonSpeed/PerformanceTips">here</a>.</p>
  </div><!-- /.entry-content -->
</section>

            </div>
                        <footer>
                <p>&copy; 2012 Riot Inc. All Rights Reserved.</p>
            </footer>
        </div>
        
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>
        <script>
            $(document).ready(function(){
                $("#follow-link").click(function(e){$("#follow").slideToggle("slow");e.preventDefault()});
            });
        </script>
        
        <script type="text/javascript">
          var _gaq = _gaq || [];
          _gaq.push(['_setAccount', 'UA-28611875-2']);
          _gaq.push(['_trackPageview']);

          (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();
        </script>
    </body>
</html>